# Template file for 'duplicity'
pkgname=duplicity
version=0.8.17
revision=1
build_style=python3-module
hostmakedepends="gettext python3-setuptools"
makedepends="python3-devel librsync-devel"
checkdepends="python3-pytest python3-future python3-fasteners
 python3-mock python3-pexpect"
depends="python3-fasteners gnupg python3-future python3-urllib3"
short_desc="Encrypted bandwidth-efficient backup using the rsync algorithm"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="http://duplicity.nongnu.org/"
changelog="http://duplicity.nongnu.org/vers8/CHANGELOG"
distfiles="http://launchpad.net/duplicity/${version%.*}-series/${version}/+download/duplicity-${version}.tar.gz"
checksum=a273b1e74d8d0b7825572f51be9c8284e579961e01f4fc1473048e95dce49984

post_extract() {
	chmod 0644 bin/*.1
}

do_check() {
	pytest
}

post_install() {
	# Remove docs
	rm -r ${DESTDIR}/usr/share/doc
}
