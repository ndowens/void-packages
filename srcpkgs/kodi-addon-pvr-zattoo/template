# Template file for 'kodi-addon-pvr-zattoo'
pkgname=kodi-addon-pvr-zattoo
version=18.1.21
revision=2
_kodi_release=Leia
wrksrc="pvr.zattoo-${version}-${_kodi_release}"
build_style=cmake
configure_args="-DCMAKE_MODULE_PATH=${XBPS_CROSS_BASE}/usr/share/kodi/cmake
 -DKODI_INCLUDE_DIR=${XBPS_CROSS_BASE}/usr/include/kodi
 -DCMAKE_PREFIX_PATH=${XBPS_CROSS_BASE}/usr"
hostmakedepends="pkg-config"
makedepends="kodi-devel kodi-platform-devel p8-platform-devel rapidjson
 tinyxml-devel tinyxml2-devel"
depends="kodi-addon-inputstream-adaptive"
short_desc="Kodi PVR addon for streaming live TV from zattoo"
maintainer="teldra <teldra@rotce.de>"
license="GPL-2.0-only"
homepage="https://github.com/rbuehlma/pvr.zattoo"
distfiles="https://github.com/rbuehlma/pvr.zattoo/archive/${version}-${_kodi_release}.tar.gz"
checksum=19de7bc58bcf37bbcff5ad2cb2f095cb15a4217f9abec5c9ff30d0489dab89d2

pre_build() {
	if [ "$CROSS_BUILD" ]; then
		# Tries to find libtinyxml.so in wrong path
		vsed -i "s,/usr/lib/libtinyxml.so,${XBPS_CROSS_BASE}/usr/lib/libtinyxml.so,g" \
			build/CMakeFiles/pvr.zattoo.dir/build.make
	fi
}
