# Template file for 'brave'
pkgname=brave
version=1.19.64
revision=1
build_style=fetch
hostmakedepends="binutils tar xz"
depends="desktop-file-utils"
short_desc="Brave browser"
maintainer="Nathan Owens <ndowens@artixlinux.org>"
license="MPL2"
homepage="https://brave.com"
_sourcename="brave-browser-dev_${version}_amd64.deb"
distfiles="https://github.com/brave/brave-browser/releases/download/v${version}/${_sourcename}"
checksum=9f0080ad085a0f8d30c448694fd123e7b3d80e1c7c0072443ea4d4c12f0ca767

do_extract() {
	ar -x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${_sourcename}
	tar -xf ${wrksrc}/data.tar.xz
}

do_install() {
	for _i in opt etc usr ; do
		vmkdir ${_i} 
	done
	cp -rp usr/* ${DESTDIR}/usr
	cp -rp opt/* ${DESTDIR}/opt
	cp -rp etc/* ${DESTDIR}/etc
}

post_install() {
	mv ${DESTDIR}/usr/bin/brave-browser* ${DESTDIR}/usr/bin/brave
	install -Dm644 ${DESTDIR}/opt/brave.com/brave-dev/product_logo_128_dev.png \
		${DESTDIR}/usr/share/icons/brave-browser.png
}
