# Template file for 'codelite'
pkgname=codelite
version=14.0.2
revision=1
#archs="i686* x86_64* ppc64le*"
build_style=cmake
configure_args="-DWITH_PCH=0
 $(vopt_if sftp -DENABLE_SFTP=1)
 $(vopt_if lldb -DENABLE_LLDB=1)"
hostmakedepends="pkg-config clang which"
makedepends="gtk+3-devel wxWidgets-gtk3-devel sqlite-devel
 $(vopt_if lldb lldb-devel) $(vopt_if hunspell hunspell-devel)
 $(vopt_if mysql libmariadbclient-devel) $(vopt_if sftp libssh-devel)"
short_desc="Open-source, cross platform IDE for the C/C++ programming languages"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="http://www.codelite.org"
distfiles="https://github.com/eranif/${pkgname}/archive/${version}.tar.gz"
checksum=76694ceed866b90a8226bbf4e3945c5898d43d5da11114148e196e5c046d735a

build_options="hunspell lldb mysql sftp"
build_options_default="hunspell sftp"
desc_option_hunspell="Enable SpellCheck plugin"
desc_option_lldb="Enable support for LLDB"
desc_option_mysql="Enable mysql/mariadb support"
desc_option_sftp="Enable Workspace Mirroring plugin"

# Arm-based gives lldb-devel not found
case "$XBPS_TARGET_MACHINE" in
	arm*|aarch64*) ;;
	*) build_options_default+=" lldb" ;;
esac

pre_configure() {
	vsed -i -e 's,wx-config,&-gtk3,g' \
	 -e "1i\SET(wxWidgets_CONFIG_EXECUTABLE wx-config-gtk3)" \
	 CMakeLists.txt
}
